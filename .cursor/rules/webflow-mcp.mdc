---
description: How to effectively use the Webflow MCP in Cursor. Use when calling Webflow MCP tools, CMS, Designer, sites, or data-modules.
globs:
alwaysApply: false
---

# Webflow MCP usage

## Before calling tools

- **Never assume site or collection IDs.** Use the Sites (or CMS) tools to list sites/collections and use the returned IDs. If the user didn't specify a site, list sites and ask which one.
- **Designer API needs Designer + Bridge:** Elements, styles, assets, variables, and Designer page tools only work when the Webflow Designer is open and the **Webflow MCP Bridge App** is open and connected. For design/canvas tasks, remind the user if needed.
- **Designer element builder:** Max **3 levels** of nesting. Build complex layouts in steps or multiple calls.

## When using tools

- **Context:** Every Webflow MCP tool requires a `context` string: 15–25 words, third-person, describing why the tool is being called (e.g. "Listing sites to resolve site ID for CMS collection lookup").
- **Styles:** Use long-form CSS property names (e.g. `margin-top`, `grid-row-gap`) as required by the Designer style tool.
- **CMS:** Provide required fields and `name`/`slug` when creating or updating items. Get collection details first if the schema is unknown.
- **Publishing:** Data API changes are draft until published. Use the publish tool only after confirming with the user.

## Effective patterns

- **Bulk CMS:** List items (paginate if needed) → get collection schema → validate required fields/slugs → create/update in batches; offer preview before large updates.
- **Audits:** Use Sites → Pages (and Collections/Items) to analyze links, alt text, meta descriptions; then suggest fixes.
- **Safe publish:** List what would be published, confirm with user, then publish.
- **Designer work:** Confirm page and selection → use element builder (≤3 levels) → apply styles with long-form properties; split complex layouts into steps.

## Data-modules: read HTML/CSS structure first

- **Never guess the DOM.** Before writing or editing any data-module (or DOM-targeting script), fetch the real structure from Webflow.
- **Where to read structure:**
  - **Data API → get_page_content(page_id):** Use when you have a page_id (from list pages). No Designer needed. Gives page content/structure for that page.
  - **Designer → get_all_elements:** When Designer + Bridge are open. Use `include_style_properties: false` and `include_all_breakpoint_styles: false` when only structure/classes/IDs are needed (avoids context overflow). Use `true` only when CSS is needed for the implementation.
  - **Designer → get_selected_element:** When the user has selected the container or relevant element; use for that subtree.
- **Use what you get:** Derive selectors and data-module placement from the returned nodes. Prefer `data-module` (and data-attributes for options) for hooking behavior.
- **Adding data-module:** Use element_tool **add_or_update_attribute** only if the element has `canHaveAttributes: true`; otherwise tell the user where to add it in the Designer.
- **Implement flow:** Resolve page → get_page_content or get_all_elements/get_selected_element → summarize wrapper, classes, IDs, nesting → write JS that matches that structure → add data-module attribute (or instruct user) → register script via Custom Code/Scripts.

Reference: [Webflow MCP – How it works](https://developers.webflow.com/mcp/reference/how-it-works). Full rules and skills: `docs/webflow-mcp-cursor.md`.
